import{_ as s,c as a,o as i,V as e}from"./chunks/framework.DVGDG1kt.js";const E=JSON.parse('{"title":"Claves de Consulta","description":"","frontmatter":{},"headers":[],"relativePath":"guides-and-concepts/query-keys.md","filePath":"guides-and-concepts/query-keys.md"}'),n={name:"guides-and-concepts/query-keys.md"},t=e(`<h1 id="claves-de-consulta" tabindex="-1">Claves de Consulta <a class="header-anchor" href="#claves-de-consulta" aria-label="Permalink to &quot;Claves de Consulta&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">INFO</p><p>La fuente original (en ingles) de este tutorial se encuentra <a href="https://tanstack.com/query/latest/docs/framework/vue/guides/query-keys" target="_blank" rel="noreferrer">aquí</a></p></div><p>En esencia, TanStack Query administra el almacenamiento en caché de consultas basado en las claves de consulta. Las claves de consulta deben ser una matriz en el nivel superior y pueden ser tan simples como una matriz con una sola cadena o tan complejas como una matriz de muchas cadenas y objetos anidados. Siempre que la clave de consulta sea serializable y <strong>única para los datos de la consulta</strong>, ¡puede usarla!</p><h2 id="claves-de-consulta-simples" tabindex="-1">Claves de Consulta Simples <a class="header-anchor" href="#claves-de-consulta-simples" aria-label="Permalink to &quot;Claves de Consulta Simples&quot;">​</a></h2><p>La forma más simple de clave es una matriz con valores constantes. Este formato es útil para:</p><ul><li>Recursos genéricos de Lista/Índice</li><li>Recursos no jerárquicos</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// A list of todos</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Something else, whatever!</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;something&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;special&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span></code></pre></div><h2 id="claves-de-matriz-con-variables" tabindex="-1">Claves de Matriz con Variables <a class="header-anchor" href="#claves-de-matriz-con-variables" aria-label="Permalink to &quot;Claves de Matriz con Variables&quot;">​</a></h2><p>Cuando una consulta necesita más información para describir de forma única sus datos, puede usar una matriz con una cadena y cualquier cantidad de objetos serializables para describirla. Esto es útil para:</p><ul><li>Recursos jerárquicos o anidados <ul><li>Es común pasar un ID, índice u otra primitiva para identificar de forma única el elemento.</li></ul></li><li>Consultas con parámetros adicionales <ul><li>Es común pasar un objeto de opciones adicionales</li></ul></li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// An individual todo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// An individual todo in a &quot;preview&quot; format</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { preview: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// A list of todos that are &quot;done&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span></code></pre></div><h2 id="¡las-claves-de-consulta-tienen-hash-de-forma-determinista" tabindex="-1">¡Las Claves de Consulta tienen hash de forma determinista! <a class="header-anchor" href="#¡las-claves-de-consulta-tienen-hash-de-forma-determinista" aria-label="Permalink to &quot;¡Las Claves de Consulta tienen hash de forma determinista!&quot;">​</a></h2><p>Esto significa que sin importar el orden de las claves en los objetos, todas las consultas siguientes se consideran iguales:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { status, page }], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { page, status }], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { page, status, other: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span></code></pre></div><p>Sin embargo, las siguientes claves de consulta no son iguales. ¡El orden de los elementos de la matriz importa!</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, status, page], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, page, status], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, page, status], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="si-su-funcion-de-consulta-depende-de-una-variable-incluyala-en-su-clave-de-consulta" tabindex="-1">Si su función de consulta depende de una variable, inclúyala en su clave de consulta <a class="header-anchor" href="#si-su-funcion-de-consulta-depende-de-una-variable-incluyala-en-su-clave-de-consulta" aria-label="Permalink to &quot;Si su función de consulta depende de una variable, inclúyala en su clave de consulta&quot;">​</a></h2><p>Dado que las claves de consulta describen de forma única los datos que están obteniendo, deben incluir cualquier variable que utilice en su función de consulta que <strong>cambie</strong>. Por ejemplo:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useTodos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">todoId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> queryKey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, todoId]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queryKey, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchTodoById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(todoId.value))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Tenga en cuenta que las claves de consulta actúan como dependencias para sus funciones de consulta. Agregar variables dependientes a su clave de consulta garantizará que las consultas se almacenen en caché de forma independiente y que cada vez que cambie una variable, <em>las consultas se recuperarán automáticamente</em> (dependiendo de su configuración <code>staleTime</code>). Consulte la sección de <a href="https://tanstack.com/query/latest/docs/eslint/exhaustive-deps" target="_blank" rel="noreferrer">detalles exhaustivos</a> para obtener más información y ejemplos.</p><h2 id="otras-lecturas" tabindex="-1">Otras lecturas <a class="header-anchor" href="#otras-lecturas" aria-label="Permalink to &quot;Otras lecturas&quot;">​</a></h2><p>Para obtener consejos sobre cómo organizar las Claves de Consulta en aplicaciones más grandes, consulte <a href="https://tanstack.com/query/latest/docs/framework/vue/community/tkdodos-blog#8-effective-react-query-keys" target="_blank" rel="noreferrer">Effective React Query Keys</a> y consulte <a href="https://tanstack.com/query/latest/docs/framework/vue/community/community-projects#query-key-factory" target="_blank" rel="noreferrer">Query Key Factory Package</a> en los recursos de la comunidad.</p>`,22),l=[t];function h(p,r,k,d,o,c){return i(),a("div",null,l)}const y=s(n,[["render",h]]);export{E as __pageData,y as default};
